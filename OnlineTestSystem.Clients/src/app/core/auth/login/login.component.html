<div class="login-container">
  <div class="login-card">
    <!-- Logo và tên hệ thống đồng bộ với header -->
    <div class="logo-section">
      <div class="logo">
        <mat-icon class="logo-icon">school</mat-icon>
        <h1>MokuTest</h1>
      </div>
      <p class="system-description">Hệ thống thi trực tuyến</p>
    </div>

    <!-- Form đăng nhập -->
    <div class="login-form">
      <h2>Đăng nhập hệ thống</h2>

      <form (ngSubmit)="onSubmit()">
        <!-- Email Input -->
        <mat-form-field class="input-field" appearance="outline">
          <mat-icon matPrefix>email</mat-icon>
          <input
            matInput
            [(ngModel)]="model.email"
            name="email"
            type="email"
            required
            [pattern]="emailPattern"
            placeholder="Nhập email của bạn"
          />
          <mat-error *ngIf="!model.email">Vui lòng nhập email</mat-error>
          <mat-error *ngIf="model.email && !model.email.match(emailPattern)">
            {{ "Email phải đúng định dạng example@example.com" }}
          </mat-error>
        </mat-form-field>

        <!-- Password Input -->
        <mat-form-field class="input-field" appearance="outline">
          <mat-icon matPrefix>lock</mat-icon>
          <input
            matInput
            [(ngModel)]="model.password"
            name="password"
            required
            [pattern]="passwordPattern"
            [type]="hide() ? 'password' : 'text'"
            placeholder="Nhập mật khẩu"
          />
          <button
            type="button"
            mat-icon-button
            matSuffix
            (click)="clickEvent($event)"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide()"
          >
            <mat-icon>{{ hide() ? "visibility_off" : "visibility" }}</mat-icon>
          </button>
          <mat-error *ngIf="!model.password">Vui lòng nhập mật khẩu</mat-error>
          <mat-error
            *ngIf="model.password && !model.password.match(passwordPattern)"
          >
            Mật khẩu phải có ít nhất 8 ký tự
          </mat-error>
        </mat-form-field>

        <div class="login-actions">
          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="login-button"
            [disabled]="
              !model.email.match(emailPattern) ||
              !model.password.match(passwordPattern)
            "
          >
            <ng-container *ngIf="!isLoading(); else loadingSpinner">
              <mat-icon>login</mat-icon>
              Đăng nhập
            </ng-container>
            <ng-template #loadingSpinner>
              <div class="spinner-container">
                <mat-spinner diameter="24"></mat-spinner>
                <span>Đang xử lý...</span>
              </div>
            </ng-template>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Background decoration -->
  <div class="background-decoration">
    <div class="circle circle-1"></div>
    <div class="circle circle-2"></div>
    <div class="circle circle-3"></div>
    <div class="circle circle-4"></div>
  </div>
</div>
